import{b as r,r as d}from"./chunk-76MR3BDS.js";import{Ha as m,o as u,r as i}from"./chunk-UDOLGC2E.js";var n="surveyFormData",p=o=>e=>{if(!e||!e.value)return null;let t=Object.values(e.value).reduce((a,s)=>a+(+s||0),0);return t===o?null:{totalNot100:{value:t,required:o}}},c=class o{fb=i(d);router=i(m);mainForm=this.createMainForm();createMainForm(){let e=this.fb.group({productDetailsForm:this.fb.group({title:["",[r.required,r.minLength(3)]],tenant:["Tenant A",r.required],company:["Company A",r.required],product:["Tenant A",r.required]}),respondentsForm:this.fb.group({totalRespondents:[void 0,[r.required,r.min(1)]]}),distributionForm:this.fb.group({selectedCriteria:this.fb.array([])}),impactDriversForm:this.fb.group({I:[50,r.required],M:[10,r.required],P:[10,r.required],A:[11,r.required],C:[10,r.required],T:[10,r.required]},{validators:p(100)}),enpsForm:this.fb.group({promoters:[60,[r.required,r.min(0),r.max(100)]],passives:[15,[r.required,r.min(0),r.max(100)]],detractors:[25,[r.required,r.min(0),r.max(100)]]},{validators:p(100)}),commentsForm:this.fb.group({Innovation:["",r.required],Motivation:["",r.required],Performance:["",r.required],Autonomy:["",r.required],Connection:["",r.required]})});return this.loadFormData(e),e.valueChanges.subscribe(t=>{this.saveFormData(e)}),e}saveFormData(e){try{let t=e.getRawValue();sessionStorage.setItem(n,JSON.stringify(t))}catch(t){console.error("Failed to save form data",t)}}loadFormData(e){try{let t=sessionStorage.getItem(n);if(t){let a=JSON.parse(t);e.patchValue(a,{emitEvent:!1})}}catch(t){console.error("Failed to load form data",t)}}clearSavedFormData(){sessionStorage.removeItem(n)}getSurveyPaginatorData(e){return(this.router.config.find(a=>a.path===e)?.children||[]).filter(a=>a.path&&a.loadComponent).map((a,s)=>({page:this.formatPageName(a.path),path:`/${e}/${a.path}`,required:!0,valid:!0,current:location.pathname.includes(`/${e}/${a.path}`)}))}currentRouteIndex(e){return e.findIndex(t=>t.current)}formatPageName(e=""){return e.replace(/-/g," ").replace(/\b\w/g,t=>t.toUpperCase())}static \u0275fac=function(t){return new(t||o)};static \u0275prov=u({token:o,factory:o.\u0275fac,providedIn:"root"})};export{c as a};
