import{a as q,c as J,e as K,h as Q,t as X}from"./chunk-P3IMJ623.js";import{C as y,Da as A,E as c,Ea as U,H as z,Ja as W,Q as F,R as d,S as m,U as H,V as j,W as S,X as i,Y as r,Z as l,a as f,b as N,ba as w,c as R,ca as T,da as s,e as p,h as I,i as u,j as V,k as O,l as L,la as a,ma as M,na as C,o as D,oa as B,r as $,s as v,t as b,ta as P,u as x,ua as G,v as _,y as g,ya as E}from"./chunk-ZKFZ3KB2.js";var k=class t{scenarios=[{id:1,name:"Scenario A",respondents:500,scoreRange:"0 - 100"},{id:2,name:"Scenario B",respondents:400,scoreRange:"10 - 90"},{id:3,name:"Scenario C",respondents:400,scoreRange:"10 - 90"}];constructor(){}getScenarios(){return p(this.scenarios).pipe(u(500))}getScenarioById(n){let e=this.scenarios.find(o=>o.id===n);return p(e).pipe(u(500))}addScenario(n){let e=N(f({},n),{id:Math.max(...this.scenarios.map(o=>o.id||0),0)+1});return this.scenarios.push(e),p(e).pipe(u(500))}updateScenario(n,e){let o=this.scenarios.findIndex(h=>h.id===n);return o!==-1?(this.scenarios[o]=f(f({},this.scenarios[o]),e),p(this.scenarios[o]).pipe(u(500))):p(null).pipe(u(500))}deleteScenario(n){let e=this.scenarios.findIndex(o=>o.id===n);return e!==-1?(this.scenarios.splice(e,1),p(!0).pipe(u(500))):p(!1).pipe(u(500))}searchScenarios(n){let e=this.scenarios.filter(o=>o.name.toLowerCase().includes(n.toLowerCase()));return p(e).pipe(u(500))}static \u0275fac=function(e){return new(e||t)};static \u0275prov=D({token:t,factory:t.\u0275fac,providedIn:"root"})};function ee(t,n){if(t&1){let e=w();i(0,"button",18),T("click",function(){v(e);let h=s();return b(h.clearSearch())}),x(),i(1,"svg",19),l(2,"path",20),r()()}}function te(t,n){if(t&1&&(i(0,"span",22),a(1),r(),a(2)),t&2){let e=s(2);c(),M(e.searchResultsCount()),c(),B(" result",e.searchResultsCount()!==1?"s":"",' for "',e.getCurrentSearchTerm(),'" ')}}function ne(t,n){if(t&1&&(i(0,"span",21),a(1),r()),t&2){let e=s(2);c(),C('No results for "',e.getCurrentSearchTerm(),'"')}}function ie(t,n){if(t&1&&(i(0,"div",14),d(1,te,3,3)(2,ne,2,1,"span",21),r()),t&2){let e=s();c(),m(e.hasSearchResults()?1:2)}}function re(t,n){if(t&1){let e=w();i(0,"div",16)(1,"div",23),x(),i(2,"svg",24),l(3,"path",25),r(),_(),i(4,"span",26),a(5),r()(),i(6,"button",27),T("click",function(){v(e);let h=s();return b(h.refreshScenarios())}),a(7," Try again "),r()()}if(t&2){let e=s();c(5),M(e.error())}}function oe(t,n){t&1&&(i(0,"div",17),l(1,"div",28),i(2,"span",29),a(3,"Loading scenarios..."),r()())}function ae(t,n){if(t&1){let e=w();i(0,"div",35),x(),i(1,"svg",36),l(2,"path",11),r(),_(),i(3,"h3",37),a(4,"No scenarios match your search"),r(),i(5,"p",38),a(6,"Try adjusting your search terms or "),i(7,"button",39),T("click",function(){v(e);let h=s(2);return b(h.clearSearch())}),a(8,"clear the search"),r(),a(9,"."),r()()}}function se(t,n){t&1&&(i(0,"div",35),x(),i(1,"svg",36),l(2,"path",40),r(),_(),i(3,"h3",37),a(4,"No scenarios found"),r(),i(5,"p",38),a(6,"Get started by creating a new scenario."),r(),i(7,"div",41)(8,"button",42),l(9,"img",43),a(10," New Scenario "),r()()())}function ce(t,n){if(t&1&&l(0,"span",46),t&2){let e=s().$implicit,o=s(3);S("innerHTML",o.highlightSearchTerm(e.name),y)}}function le(t,n){if(t&1&&a(0),t&2){let e=s().$implicit;C(" ",e.name," ")}}function de(t,n){if(t&1&&l(0,"span",46),t&2){let e=s().$implicit,o=s(3);S("innerHTML",o.highlightSearchTerm(e.respondents.toString()),y)}}function me(t,n){if(t&1&&(a(0),P(1,"number")),t&2){let e=s().$implicit;C(" ",G(1,1,e.respondents)," ")}}function pe(t,n){if(t&1&&l(0,"span",46),t&2){let e=s().$implicit,o=s(3);S("innerHTML",o.highlightSearchTerm(e.scoreRange),y)}}function ue(t,n){if(t&1&&a(0),t&2){let e=s().$implicit;C(" ",e.scoreRange," ")}}function he(t,n){if(t&1&&(i(0,"div",44)(1,"div",45),d(2,ce,1,1,"span",46)(3,le,1,1),r(),i(4,"div",47),d(5,de,1,1,"span",46)(6,me,2,3),r(),i(7,"div",48),d(8,pe,1,1,"span",46)(9,ue,1,1),r(),i(10,"div",49),l(11,"img",50),r()()),t&2){let e=s(3);c(2),m(e.isSearching()?2:3),c(3),m(e.isSearching()?5:6),c(3),m(e.isSearching()?8:9)}}function xe(t,n){if(t&1&&H(0,he,12,3,"div",44,F().trackByScenario,!0),t&2){let e=s(2);j(e.scenarios())}}function _e(t,n){if(t&1&&(i(0,"div",30)(1,"div",31),a(2,"Scenario Name"),r(),i(3,"div",32),a(4,"Number of Respondents"),r(),i(5,"div",32),a(6,"Score Range"),r(),i(7,"div",33)(8,"span",34),a(9,"Edit"),r()()(),d(10,ae,10,0,"div",35)(11,se,11,0,"div",35)(12,xe,2,0)),t&2){let e=s();c(10),m(e.hasNoSearchResults()?10:e.scenarios().length===0&&!e.isLoading()&&!e.isSearching()?11:12)}}var Y=class t{scenariosService=$(k);destroy$=new R;searchControl=new K("",{nonNullable:!0});allScenarios=g([]);searchTerm=g("");scenarios=E(()=>{let n=this.searchTerm().toLowerCase().trim();return n?this.allScenarios().filter(e=>e.name.toLowerCase().includes(n)||e.respondents.toString().includes(n)||e.scoreRange.toLowerCase().includes(n)):this.allScenarios()});isLoading=g(!1);error=g(null);isSearching=E(()=>this.searchTerm().length>0);searchResultsCount=E(()=>this.scenarios().length);ngOnInit(){this.setupSearch(),this.loadScenarios()}setupSearch(){this.searchControl.valueChanges.pipe(O(""),I(300),V(),L(this.destroy$)).subscribe(n=>{this.searchTerm.set(n)})}loadScenarios(){this.isLoading.set(!0),this.error.set(null),this.scenariosService.getScenarios().pipe(L(this.destroy$)).subscribe({next:n=>{this.allScenarios.set(n),this.isLoading.set(!1)},error:n=>{console.error("Error loading scenarios:",n),this.error.set("Failed to load scenarios. Please try again."),this.isLoading.set(!1)}})}refreshScenarios(){this.loadScenarios()}clearSearch(){this.searchControl.setValue("")}getCurrentSearchTerm(){return this.searchTerm()}hasSearchResults(){return this.isSearching()&&this.searchResultsCount()>0}hasNoSearchResults(){return this.isSearching()&&this.searchResultsCount()===0}highlightSearchTerm(n){if(!this.isSearching()||!n)return n;let e=this.getCurrentSearchTerm();if(!e)return n;let o=new RegExp(`(${e.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")})`,"gi");return n.replace(o,'<mark class="bg-yellow-200 text-yellow-900 px-1 rounded">$1</mark>')}trackByScenario(n,e){return e.id||n}ngOnDestroy(){this.destroy$.next(),this.destroy$.complete()}static \u0275fac=function(e){return new(e||t)};static \u0275cmp=z({type:t,selectors:[["app-scenarios"]],decls:21,vars:5,consts:[[1,"flex-grow","p-6","container-scenarios"],[1,"flex","items-center","justify-between","mb-6"],[1,"text-2xl","font-bold"],[1,"flex","items-center","space-x-2"],["routerLink","/survey",1,"flex","items-center","px-4","py-2","text-white","bg-primary-zenithr","hover:bg-primary-button-hover","rounded-lg","shadow","transition-colors","duration-200"],["src","assets/img/plus.png","alt","New Scenario",1,"w-5","h-5","mr-1"],[1,"overflow-hidden"],[1,"flex","items-center","justify-between","pb-4"],[1,"relative","w-full","max-w-md"],[1,"absolute","inset-y-0","left-0","flex","items-center","pl-3"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"],["type","text","placeholder","Search by name, respondents, or score range...",1,"focus:outline-none","focus:ring-2","focus:ring-primary-zenithr","focus:border-transparent","w-full","pl-10","pr-10","border","text-secondary-1000","border-gray-200","text-sm","py-2","bg-white","rounded-lg","transition-all","duration-200",3,"formControl"],["type","button","title","Clear search",1,"absolute","inset-y-0","right-0","flex","items-center","pr-3","hover:bg-gray-50","rounded-r-lg","transition-colors","duration-200"],[1,"text-sm","text-gray-600","ml-4"],[1,"space-y-4","text-secondary-zenithr","font-bold"],[1,"bg-red-50","border","border-red-200","rounded-lg","p-4","mb-4"],[1,"flex","justify-center","items-center","py-12"],["type","button","title","Clear search",1,"absolute","inset-y-0","right-0","flex","items-center","pr-3","hover:bg-gray-50","rounded-r-lg","transition-colors","duration-200",3,"click"],["fill","none","stroke","currentColor","viewBox","0 0 24 24",1,"w-4","h-4","text-gray-400","hover:text-gray-600"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M6 18L18 6M6 6l12 12"],[1,"text-gray-500"],[1,"text-primary-zenithr","font-medium"],[1,"flex","items-center"],["fill","currentColor","viewBox","0 0 20 20",1,"w-5","h-5","text-red-400","mr-2"],["fill-rule","evenodd","d","M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z","clip-rule","evenodd"],[1,"text-red-700","text-sm"],[1,"mt-2","text-red-600","hover:text-red-500","text-sm","underline",3,"click"],[1,"animate-spin","rounded-full","h-8","w-8","border-b-2","border-primary-zenithr"],[1,"ml-2","text-gray-600"],[1,"flex","items-center","text-xs","uppercase","tracking-wider","mb-0"],[1,"w-1/3","px-4","py-3"],[1,"w-1/3","px-2","py-3"],[1,"relative","px-2","py-3"],[1,"sr-only"],[1,"text-center","py-12","text-gray-500"],["fill","none","viewBox","0 0 24 24","stroke","currentColor",1,"mx-auto","h-12","w-12","text-gray-400"],[1,"mt-2","text-sm","font-medium","text-gray-900"],[1,"mt-1","text-sm","text-gray-500"],[1,"text-primary-zenithr","hover:text-primary-button-hover","underline",3,"click"],["stroke-linecap","round","stroke-linejoin","round","stroke-width","2","d","M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"],[1,"mt-6"],["routerLink","/survey",1,"inline-flex","items-center","px-4","py-2","border","border-transparent","shadow-sm","text-sm","font-medium","rounded-md","text-white","bg-primary-zenithr","hover:bg-primary-button-hover"],["src","assets/img/plus.png","alt","New Scenario",1,"w-4","h-4","mr-1"],[1,"flex","items-center","rounded-lg","bg-white","p-3","mb-2","hover:shadow-md","transition-all","duration-200"],[1,"w-1/3","px-2","py-4","text-sm"],[3,"innerHTML"],[1,"w-1/3","px-4","py-4","text-sm"],[1,"w-1/3","md:px-9","px-4","py-4","text-sm"],[1,"px-2","py-4","text-sm"],["src","assets/img/optionsdots.png","alt","options button",1,"w-9","cursor-pointer","hover:brightness-50"]],template:function(e,o){e&1&&(i(0,"div",0)(1,"div",1)(2,"h2",2),a(3,"Scenarios"),r(),i(4,"div",3)(5,"button",4),l(6,"img",5),a(7," New Scenario "),r()()(),i(8,"div",6)(9,"div",7)(10,"div",8)(11,"div",9),x(),i(12,"svg",10),l(13,"path",11),r()(),_(),l(14,"input",12),d(15,ee,3,0,"button",13),r(),d(16,ie,3,1,"div",14),r(),i(17,"div",15),d(18,re,8,1,"div",16),d(19,oe,4,0,"div",17)(20,_e,13,1),r()()()),e&2&&(c(14),S("formControl",o.searchControl),c(),m(o.isSearching()?15:-1),c(),m(o.isSearching()?16:-1),c(2),m(o.error()?18:-1),c(),m(o.isLoading()&&o.scenarios().length===0?19:20))},dependencies:[W,U,X,q,J,Q,A],styles:[".container-scenarios[_ngcontent-%COMP%]{min-width:500px}.container-scenarios[_ngcontent-%COMP%]   input[_ngcontent-%COMP%]{outline:none;border:none;box-shadow:none}"]})};export{Y as ScenariosComponent};
