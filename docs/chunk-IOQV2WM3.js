import{a as P}from"./chunk-EFQI3KFR.js";import{a as G,b as y,c as k,d as H,g as O,i as $,j as V,k as L,l as D,r as M,s as B,t as R}from"./chunk-P3IMJ623.js";import{Ca as I,E as l,H as T,T as _,U as g,V as h,W as p,X as n,Y as o,Z as d,ba as v,ca as x,da as u,la as s,ma as b,na as w,pa as A,r as S,s as C,sa as N,t as f,u as F,v as E}from"./chunk-ZKFZ3KB2.js";var q=(a,t)=>({"text-red-500":a,"text-blue-500":t});function W(a,t){if(a&1){let e=v();n(0,"li",10),x("click",function(){let r=C(e),c=r.$implicit,m=r.$index,Z=u();return f(Z.onCriterionSelect(c,m))}),d(1,"input",11),n(2,"span"),s(3),o()()}if(a&2){let e=t.$implicit;l(),p("checked",e.selected),l(2),b(e.name)}}function z(a,t){if(a&1){let e=v();n(0,"div",24),d(1,"img",29)(2,"input",30)(3,"input",31),n(4,"button",16),x("click",function(){let r=C(e).$index,c=u().$index,m=u();return f(m.removeOption(c,r))}),F(),n(5,"svg",17)(6,"g",18),d(7,"rect",19)(8,"path",20),o(),n(9,"defs")(10,"clipPath",21),d(11,"rect",22),o()()()()()}if(a&2){let e=t.$index;p("formGroupName",e),l(),p("alt",A("draganddrop ",e))}}function U(a,t){if(a&1){let e=v();n(0,"div",9)(1,"div",12)(2,"div",13)(3,"span",14),s(4),o(),n(5,"span",15),s(6),o()(),n(7,"button",16),x("click",function(){let r=C(e).$index,c=u();return f(c.removeCriterion(r))}),F(),n(8,"svg",17)(9,"g",18),d(10,"rect",19)(11,"path",20),o(),n(12,"defs")(13,"clipPath",21),d(14,"rect",22),o()()()()(),E(),n(15,"div",23),g(16,z,12,3,"div",24,_),o(),n(18,"div",25)(19,"span",26),s(20,"TOTAL DISTRIBUTION"),o(),n(21,"span",27),s(22),o()(),n(23,"button",28),x("click",function(){let r=C(e).$index,c=u();return f(c.addOption(r))}),s(24),o()()}if(a&2){let e=t.$implicit,i=t.$index,r=u();p("formGroupName",i),l(4),b(i+1),l(2),b(e.value.name),l(10),h(r.getOptions(i).controls),l(5),p("ngClass",N(6,q,r.calculateTotal(e)!==100,r.calculateTotal(e)===100)),l(),w(" ",r.calculateTotal(e),"% "),l(2),w(" + Add ",e.value.name," ")}}var j=class a{fb=S(M);formService=S(P);form=this.formService.mainForm.get("distributionForm");allCriteria=[{name:"Age Group",selected:!1},{name:"Department",selected:!1},{name:"Gender",selected:!1},{name:"Location",selected:!1}];get selectedCriteria(){return this.form.get("selectedCriteria")}ngOnInit(){this.syncCriteriaSelectionWithForm()}syncCriteriaSelectionWithForm(){let t=this.selectedCriteria.value.map(e=>e.name);this.allCriteria.forEach(e=>{e.selected=t.includes(e.name)})}setCriterionOptions(t,e){let i=this.allCriteria.find(m=>m.name===t);if(!i)return;i.selected=!0;let r=this.createCriterion(t),c=r.get("options");e.forEach(m=>{c.push(this.createOption(m.name,m.percentage))}),this.selectedCriteria.push(r)}getOptions(t){return this.selectedCriteria.at(t).get("options")}createCriterion(t){return this.fb.group({name:[t],options:this.fb.array([],y.required)})}createOption(t,e){return this.fb.group({name:[t],percentage:[e,[y.required,y.min(0)]]})}onCriterionSelect(t,e){if(t.selected=!t.selected,t.selected)this.selectedCriteria.push(this.createCriterion(t.name));else{let i=this.selectedCriteria.controls.findIndex(r=>r.get("name")?.value===t.name);i!==-1&&this.selectedCriteria.removeAt(i)}}removeCriterion(t){let e=this.selectedCriteria.at(t).get("name")?.value,i=this.allCriteria.find(r=>r.name===e);i&&(i.selected=!1),this.selectedCriteria.removeAt(t)}addOption(t){this.getOptions(t).push(this.createOption("New",0))}removeOption(t,e){this.getOptions(t).removeAt(e)}calculateTotal(t){return t.get("options").controls.reduce((i,r)=>i+(r.get("percentage")?.value||0),0)}static \u0275fac=function(e){return new(e||a)};static \u0275cmp=T({type:a,selectors:[["app-select-criteria"]],decls:18,vars:1,consts:[[1,"flex-grow","p-6","container-survey"],[1,"p-6",3,"formGroup"],[1,"text-xl","font-bold","mb-2"],[1,"text-gray-600","mb-6"],[1,"grid","grid-cols-1","md:grid-cols-2","gap-8"],[1,"text-lg","font-semibold","mb-4"],[1,"space-y-2"],[1,"p-3","rounded-md","cursor-pointer","flex","items-center"],["formArrayName","selectedCriteria"],[1,"bg-gray-100","p-4","rounded-md","mb-4",3,"formGroupName"],[1,"p-3","rounded-md","cursor-pointer","flex","items-center",3,"click"],["type","checkbox",1,"mr-3","w-6","h-6","rounded-md",3,"checked"],[1,"flex","items-center","justify-between","mb-2"],[1,"flex","items-center"],[1,"mr-2"],[1,"font-bold"],[1,"text-red-500",3,"click"],["width","32","height","32","viewBox","0 0 32 32","fill","none","xmlns","http://www.w3.org/2000/svg"],["clip-path","url(#clip0_1501_8547)"],["width","32","height","32","rx","4","fill","#FF4530","fill-opacity","0.1"],["d","M14.5312 9.5C14.4375 9.5 14.375 9.5625 14.3125 9.625L13.7188 10.5H18.25L17.6562 9.625C17.625 9.5625 17.5312 9.5 17.4375 9.5H14.5312ZM20.0625 10.5H20.4688H22H22.25C22.6562 10.5 23 10.8438 23 11.25C23 11.6875 22.6562 12 22.25 12H21.875L21.125 22.1562C21.0312 23.2188 20.1875 24 19.125 24H12.8438C11.7812 24 10.9375 23.2188 10.8438 22.1562L10.0938 12H9.75C9.3125 12 9 11.6875 9 11.25C9 10.8438 9.3125 10.5 9.75 10.5H10H11.5H11.9062L13.0625 8.78125C13.375 8.3125 13.9375 8 14.5312 8H17.4375C18.0312 8 18.5938 8.3125 18.9062 8.78125L20.0625 10.5ZM20.375 12H11.5938L12.3438 22.0625C12.375 22.3125 12.5938 22.5 12.8438 22.5H19.125C19.375 22.5 19.5938 22.3125 19.625 22.0625L20.375 12Z","fill","#FF4530"],["id","clip0_1501_8547"],["width","32","height","32","rx","4","fill","white"],["formArrayName","options"],[1,"flex","items-center","space-x-2","mb-2",3,"formGroupName"],[1,"flex","justify-between","items-center","mt-2","text-secondary-zenithr"],[1,"text-sm","font-medium","mr-2"],[1,"font-medium","px-4","py-1","bg-primary-100","rounded-sm",3,"ngClass"],[1,"mt-2","text-blue-500","font-semibold",3,"click"],["src","../../../assets/img/draganddrop.png",1,"w-10","h-10","cursor-move",3,"alt"],["type","text","formControlName","name",1,"block","w-2/3","shadow","rounded","px-2","py-1","bg-white"],["type","number","formControlName","percentage",1,"w-1/4","shadow","rounded","px-2","py-1","text-right","bg-white"]],template:function(e,i){e&1&&(n(0,"div",0)(1,"div",1)(2,"h1",2),s(3,"Select Criteria for Distribution"),o(),n(4,"p",3),s(5," Choose the criteria that will be used for score distribution. You can apply a High (H) or Low (L) distribution mode to each selected criterion. "),o(),n(6,"div",4)(7,"div")(8,"h2",5),s(9,"SELECTED CRITERIA"),o(),n(10,"ul",6),g(11,W,4,2,"li",7,_),o()(),n(13,"div",8)(14,"h2",5),s(15,"SELECTED CRITERIA"),o(),g(16,U,25,9,"div",9,_),o()()()()),e&2&&(l(),p("formGroup",i.form),l(10),h(i.allCriteria),l(5),h(i.selectedCriteria.controls))},dependencies:[R,G,O,k,H,$,D,V,L,B,I],styles:[".container-survey[_ngcontent-%COMP%]{min-width:500px}"]})};export{j as SelectCriteriaComponent};
